<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rivally - AI Strategy</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background: #f0f2f5; margin: 0; padding: 40px 20px; color: #1f2937; }
        .container { max-width: 900px; margin: 0 auto; background: white; padding: 40px; border-radius: 20px; box-shadow: 0 10px 40px rgba(0,0,0,0.08); }
        
        h1 { text-align: center; font-weight: 800; font-size: 2.5rem; margin-bottom: 10px; color: #111; }
        p.sub { text-align: center; color: #666; margin-bottom: 40px; }


        /* DIZAJN LEVO - DESNO */
        .battle-arena { display: flex; gap: 40px; margin-bottom: 30px; }
        .side { flex: 1; padding: 20px; border-radius: 12px; }
        .side.left { background: #eff6ff; border: 2px solid #bfdbfe; } /* Plavo za tebe */
        .side.right { background: #fef2f2; border: 2px solid #fecaca; } /* Crveno za njih */

        h2 { font-size: 1.2rem; margin-top: 0; margin-bottom: 15px; text-transform: uppercase; letter-spacing: 1px; }
        .left h2 { color: #2563eb; }
        .right h2 { color: #dc2626; }

        label { display: block; margin-bottom: 5px; font-weight: 600; font-size: 0.9rem; }
        input, textarea { width: 100%; padding: 12px; margin-bottom: 15px; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; font-family: inherit; }
        
        button.cta {
            width: 100%; padding: 20px; background: #111; color: white; font-size: 1.2rem; font-weight: bold; border: none; border-radius: 12px; cursor: pointer; transition: transform 0.1s;
        }
        button.cta:hover { transform: scale(1.02); background: #000; }

        /* REZULTAT I BADGE */
        #result-area { display: none; margin-top: 40px; border-top: 2px dashed #ddd; padding-top: 40px; }

        .score-display { font-size: 3rem; font-weight: 800; color: #2563eb; text-align: center; margin-bottom: 20px; }
        .strategy-text { white-space: pre-wrap; line-height: 1.6; background: #f9fafb; padding: 20px; border-radius: 12px; margin-bottom: 30px; }

        .embed-box { background: #2d3748; color: #a0aec0; padding: 20px; border-radius: 8px; font-family: monospace; font-size: 14px; position: relative; }

        .embed-label { color: #fff; font-weight: bold; margin-bottom: 10px; display: block; }
    </style>
</head>
<body>

    <div class="container">
        <h1>âš¡ RIVALLY</h1>
        <p class="sub">Unesite podatke i saznajte ko pobeÄ‘uje.</p>

        <div class="battle-arena">
            <div class="side left">
                <h2>ðŸ”µ VaÅ¡ Biznis</h2>

                <label>Naziv i Opis</label>
                <input type="text" id="my_product" placeholder="npr. Moja Picerija, pravimo domaÄ‡e testo...">
                <label>VaÅ¡a Prednost</label>
                <input type="text" id="my_advantage" placeholder="npr. Besplatna dostava">
            </div>

            <div class="side right">
                <h2>ðŸ”´ Konkurencija</h2>
                <label>Naziv Konkurenta</label>
                <input type="text" id="competitor" placeholder="npr. Domino's Pizza">
                <label>Njihova Slabost</label>
                <input type="text" id="comp_weakness" placeholder="npr. Skupi su, industrijski ukus">
            </div>
        </div>

        <button class="cta" onclick="generate()">GeneriÅ¡i Analizu & BedÅ¾ ðŸš€</button>
        <div id="loading" style="text-align:center; display:none; margin-top:20px;">Analiziram...</div>

        <div id="result-area">
            <div id="score" class="score-display"></div>
            <div id="strategy" class="strategy-text"></div>

            <label class="embed-label">ðŸ“‹ KOD ZA VAÅ  SAJT (Embed Badge):</label>
            <div class="embed-box" id="embed-code">
                &lt;div style="border:2px solid #2563eb; padding:10px; border-radius:5px; text-align:center;"&gt;
                   &lt;strong&gt;RIVALLY VERIFIED&lt;/strong&gt;<br>
                   Dominance Score: <span id="embed-score">0</span>/10
                &lt;/div&gt;
            </div>
        </div>
    </div>


    <script>
        async function generate() {
            const btn = document.querySelector('.cta');
            const load = document.getElementById('loading');
            const res = document.getElementById('result-area');
            
            // Skupljamo podatke
            const data = {
                my_product: document.getElementById('my_product').value,
                my_advantage: document.getElementById('my_advantage').value,
                competitor: document.getElementById('competitor').value,
                comp_weakness: document.getElementById('comp_weakness').value
            };

            if(!data.my_product || !data.competitor) { alert("Unesite bar imena firmi!"); return; }

            btn.disabled = true; load.style.display = 'block'; res.style.display = 'none';

            try {
                const response = await fetch('/generate', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify(data)
                });

                if(!response.ok) throw new Error("Server Error");

                const result = await response.json();

                // Prikaz
                document.getElementById('score').innerText = "SCORE: " + result.score + "/10";
                document.getElementById('strategy').innerText = result.strategy;
                
                // Azuriraj embed kod
                document.getElementById('embed-score').innerText = result.score;

                
                res.style.display = 'block';

            } catch(e) {
                alert("GreÅ¡ka: " + e.message);
            } finally {
                btn.disabled = false; load.style.display = 'none';
            }
        }
    </script>
</body>
</html>
